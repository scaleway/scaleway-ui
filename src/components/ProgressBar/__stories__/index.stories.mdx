import { Canvas, Description, Meta, Story } from '@storybook/addon-docs/blocks'
import { useEffect, useState } from 'react'
import { ProgressBar, progressBarVariants } from '..'
import { Boxer } from '../..'
import UncontrolledProgressBar from './UncontrolledProgressBar'

<Meta title="Components/ProgressBar" component={ProgressBar} />

# ProgressBar

<Description>An horizontal progress bar.</Description>

## Basic

<Canvas>
  <Story name="basic">
    {() => {
      const [value, setValue] = useState(0)
      useEffect(() => {
        setInterval(() => {
          setValue(currentValue =>
            currentValue === 0 ? Math.round(Math.random() * 100) : 0,
          )
        }, 800)
      }, [])
      return <ProgressBar value={value} />
    }}
  </Story>
</Canvas>

## Variants

<Description>Set variant using `variant` prop.</Description>

<Canvas>
  <Story name="variants">
    {() => (
      <Boxer my={1}>
        {progressBarVariants.map(variant => (
          <UncontrolledProgressBar key={variant} variant={variant} />
        ))}
      </Boxer>
    )}
  </Story>
</Canvas>

## Progress

<Canvas>
  <Story name="progress">
    <ProgressBar progress />
  </Story>
</Canvas>

## Secondary color

<Description>
  You can set the `backgroundColor` property to set the background progress
  color
</Description>

<Canvas>
  <Story name="background">
    <ProgressBar value={60} backgroundColor="green" />
  </Story>
</Canvas>

## 100% cap

<Description>
  Value will be capped out above 0 and below 100, so you&apos;re safe to pass an
  even greater/lower value
</Description>

<Canvas>
  <Story name="cap">
    <Boxer my={1}>
      <ProgressBar value={600} />
      <ProgressBar value={-600} />
    </Boxer>
  </Story>
</Canvas>
