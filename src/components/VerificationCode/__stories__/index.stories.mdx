import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs/blocks'
import { useState } from 'react'
import { VerificationCode } from '..'
import ControlValue from '../../../__stories__/components/ControlValue'

<Meta title="Components/VerificationCode" component={VerificationCode} />

# VerificationCode

## With initial value

<Canvas>
  <Story name="initial">
    <VerificationCode initialValue="1337" inputId="verification-code-input" />
  </Story>
</Canvas>

## Controlled

<Canvas>
  <Story name="controlled">
    <ControlValue>
      {({ value, onChange }) => (
        <>
          <VerificationCode
            value={value}
            onChange={onChange}
            placeholder="0000"
            inputId="verification-code-input-controlled"
          />
          Value is : {value}
        </>
      )}
    </ControlValue>
  </Story>
</Canvas>

## With Completed action

<Canvas>
  <Story name="on-complete">
    {() => {
      const [displayComplete, setDisplayComplete] = useState(false)
      return (
        <>
          <VerificationCode
            placeholder="0000"
            inputId="verification-code-input-completed-action"
            onChange={() => {
              if (displayComplete) setDisplayComplete(false)
            }}
            onComplete={() => {
              setDisplayComplete(true)
            }}
          />
          {displayComplete && 'Completed !'}
        </>
      )
    }}
  </Story>
</Canvas>

## With no initial value and placeholder

<Canvas>
  <Story name="no-initial">
    <VerificationCode
      placeholder="0000"
      inputId="verification-code-input-no-value"
    />
  </Story>
</Canvas>

## With incomplete initial value and placeholder

<Canvas>
  <Story name="incomplete">
    <VerificationCode
      fields={6}
      initialValue="13"
      placeholder="0037"
      inputId="verification-code-input-incomplete"
    />
  </Story>
</Canvas>

## Error state

<Canvas>
  <Story name="error">
    <VerificationCode inputId="error" initialValue="13" error />
  </Story>
</Canvas>

## Type text

<Canvas>
  <Story name="type-text">
    <VerificationCode type="text" initialValue="13" />
  </Story>
</Canvas>

<ArgsTable of={VerificationCode} />
