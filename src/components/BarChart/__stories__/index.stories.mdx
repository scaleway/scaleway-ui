import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs/blocks'
import { format } from 'date-fns'
import BarChart from '..'
import {
  barChartMultiData,
  barChartPositiveNegativeData,
  barChartSimpleData,
} from './mockData'

<Meta title="Components/Data Display/Chart/BarChart" />

# BarChart

## Basic example

<Canvas>
  <Story name="basic">
    <BarChart data={barChartSimpleData} />
  </Story>
</Canvas>

## Formatted values and tooltip

<Canvas>
  <Story name="formatted values and tooltip">
    <BarChart
      data={barChartSimpleData}
      axisFormatters={{
        bottom: value => format(new Date(value), 'dd-MM-Y'),
        left: value => `${value} kb`,
      }}
      tooltipFunction={({ value, indexValue, ...props }) => ({
        ...props,
        formattedValue: `${value} kb`,
        indexValue: format(new Date(indexValue), 'dd-MM-Y'),
      })}
    />
  </Story>
</Canvas>

## Multi series

<Canvas>
  <Story name="multi series">
    <BarChart
      keys={['sent', 'received']}
      data={barChartMultiData}
      axisFormatters={{
        bottom: value => format(new Date(value), 'dd-MM-Y'),
      }}
      tooltipFunction={({ value, indexValue, ...props }) => ({
        ...props,
        indexValue: format(new Date(indexValue), 'dd-MM-Y'),
      })}
    />
  </Story>
</Canvas>

## Positive/negative

<Canvas>
  <Story name="positive/negative">
    <BarChart
      height={200}
      data={barChartPositiveNegativeData}
      axisFormatters={{
        bottom: value => format(new Date(value), 'dd-MM-Y'),
        left: value => {
          if (value === 1) return 'Active'
          if (value === -1) return 'Inactive'
          return ''
        },
      }}
      tooltipFunction={({ value, indexValue, ...props }) => ({
        ...props,
        formattedValue: value === 1 ? 'Active' : 'Inactive',
        indexValue: format(new Date(indexValue), 'dd-MM-Y'),
      })}
      tickValues={{
        left: 10,
      }}
      chartProps={{
        colors: ({ value }) => (value === 1 ? 'green' : 'red'),
        gridYValues: [-1, 0, 1],
        maxValue: 1,
        minValue: -1,
      }}
    />
  </Story>
</Canvas>

<ArgsTable of={BarChart} />
