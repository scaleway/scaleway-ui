import { useI18n } from '@scaleway/use-i18n'
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs/blocks'
import { es, fr, ru } from 'date-fns/locale'
import DateInput from '..'
import ControlValue from '../../../__stories__/components/ControlValue'
import RichSelect from '../../RichSelect'

<Meta title="Components/DateInput" />

# DateInput

## Uncontrolled

DateInput can be used as an [uncontrolled component](https://reactjs.org/docs/uncontrolled-components.html).

<Canvas>
  <Story name="Uncontrolled" height="360px">
    <DateInput label="Date" />
  </Story>
</Canvas>

## Controlled

Most of the time, you need a [controlled component](https://reactjs.org/docs/forms.html#controlled-components).

<Canvas>
  <Story name="Controlled" height="360px">
    <ControlValue value={new Date('December 17, 1995 03:24:00')}>
      {({ value, onChange }) => (
        <DateInput label="Date" value={value} onChange={onChange} />
      )}
    </ControlValue>
  </Story>
</Canvas>

## Error

<Canvas>
  <Story name="Error" height="380px">
    <DateInput label="Error" error="This is an error" />
  </Story>
</Canvas>

## Disabled

<Canvas>
  <Story name="Disabled">
    <DateInput label="Disabled" disabled />
  </Story>
</Canvas>

## Required

<Canvas>
  <Story name="Required" height="360px">
    <DateInput label="Required" required />
  </Story>
</Canvas>

## Localized

<Canvas>
  <Story name="Localized fr" height="360px">
    <DateInput label="fr-FR" locale={fr} m={2} />
  </Story>
</Canvas>

<Canvas>
  <Story name="Localized es" height="360px">
    <DateInput label="es-ES" locale={es} m={2} />
  </Story>
</Canvas>

<Canvas>
  <Story name="Localized ru" height="360px">
    <DateInput label="ru-RU" locale={ru} m={2} />
  </Story>
</Canvas>

## Localized with i18n Provider

<Canvas>
  <Story name="i18n provider" height="360px">
    {() => {
      const { locales, currentLocale, switchLocale, dateFnsLocale } = useI18n()
      return (
        <>
          <RichSelect
            name="locale-switcher"
            isSearchable={false}
            value={{
              label: currentLocale,
              value: currentLocale,
            }}
            onChange={({ value }) => switchLocale(value)}
            noTopLabel
            mb={3}
          >
            {locales.map(locale => (
              <RichSelect.Option value={locale} key={locale}>
                {locale}
              </RichSelect.Option>
            ))}
          </RichSelect>
          <DateInput label={currentLocale} locale={dateFnsLocale} />
        </>
      )
    }}
  </Story>
</Canvas>

## Min Max

<Canvas>
  <Story name="Min-Max" height="360px">
    <DateInput
      label="Date"
      value={new Date('1995-12-17T03:24:00')}
      minDate={new Date('December 12, 1995 03:24:00')}
      maxDate={new Date('December 25, 1995 03:24:00')}
    />
  </Story>
</Canvas>

<ArgsTable of={DateInput} />
