import {
  ArgsTable,
  Canvas,
  Description,
  Meta,
  Story,
} from '@storybook/addon-docs/blocks'
import { useEffect, useState } from 'react'
import Select from '..'
import { Button } from '../../Button'

<Meta title="Components/Select" component={Select} />

# Select

<Description>Select Component</Description>

## Uncontrolled

<Canvas>
  <Story name="Uncontrolled" height="100px">
    <Select>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

## Controlled

<Canvas>
  <Story name="Controlled" height="100px">
    <Select>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

## Disabled

<Canvas>
  <Story name="Disabled" height="100px">
    <Select disabled>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

## Error

<Canvas>
  <Story name="Error" height="100px">
    <Select error>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

## Read only

<Canvas>
  <Story name="Read Only" height="100px">
    <Select readOnly>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

## Loading

### Demo

<Canvas>
  <Story name="Demo Loading" height="100px">
    <Select isLoading>
      <Select.Option value="a">Option A</Select.Option>
      <Select.Option value="b">Option B</Select.Option>
    </Select>
  </Story>
</Canvas>

### Exemple

<Canvas>
  <Story name="Exemple Loading" height="100px">
    {() => {
      const [isLoading, setIsLoading] = useState(true)
      useEffect(() => {
        let timeout
        if (isLoading) {
          timeout = setTimeout(() => {
            setIsLoading(false)
          }, 3000)
        }
        return () => clearTimeout(timeout)
      }, [isLoading])
      return (
        <>
          <Button size="small" mb={2} onClick={() => setIsLoading(true)}>
            Load data
          </Button>
          <Select isLoading={isLoading}>
            <Select.Option value="a">Option A</Select.Option>
            <Select.Option value="b">Option B</Select.Option>
          </Select>
        </>
      )
    }}
  </Story>
</Canvas>

<ArgsTable of={Select} />

<ArgsTable of={Select.Option} />
