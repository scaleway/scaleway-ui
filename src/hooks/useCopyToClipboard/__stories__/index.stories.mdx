import { useState } from 'react'
import { Meta, Story, Canvas, Description } from '@storybook/addon-docs/blocks'
import { useCopyToClipboard } from '..'
import { Box, Button } from '../../../components'
import { Input } from '@smooth-ui/core-em'

<Meta title="Hooks/useCopyToClipboard" />

# useCopyToClipboard

<Description>
  A React hook to copy text into clipboard.
</Description>

## Basic

<Canvas>
  <Story name="basic">
    {() => {
      const [ text, setText ] = useState('')
      const [ copied, copy, reset ] = useCopyToClipboard(0)
      return (
        <>
          <Box mb={2} display="flex">
            <Input
              placeholder="Text to copy"
              onChange={e => {
                setText(e.currentTarget.value)
                reset()
              }}
              value={text}
              mr={1}
            />
            <Button
              size="sm"
              onClick={() => copy(text)}
              icon={copied ? 'check' : 'copy-content'}
            >
              {copied ? 'Copied' : 'Copy' }
            </Button>
          </Box>
          <Input placeholder="Test copied text here"/>
        </>
      )
    }}
  </Story>
</Canvas>

## With Reset

<Description>
  You can specify a timeout after which the `copied` will be reset. The default timeout is `5000 ms`.
  Set a timeout inferior or equal to 0 to disable it.
  This hook also provide a `reset` function if you need to reset manualy.
</Description>

<Canvas>
  <Story name="reset">
    {() => {
      const [ timeout, setTimeout ] = useState(5000)
      const [ text, setText ] = useState('')
      const [ copied, copy, reset ] = useCopyToClipboard(timeout)
      return (
        <>
          <Box mb={2} display="flex">
            <Input
              type="number"
              placeholder="Timeout"
              onChange={e => setTimeout(e.currentTarget.value)}
              value={timeout}
              width="80px"
              mr={1}
            />
            <Input
              placeholder="Text to copy"
              onChange={e => {
                setText(e.currentTarget.value)
                reset()
              }}
              value={text}
              mr={1}
            />
            <Button
              size="sm"
              onClick={() => copy(text)}
              icon={copied ? 'check' : 'copy-content'}
            >
              {copied ? 'Copied' : 'Copy' }
            </Button>
          </Box>
          <Input placeholder="Test copied text here"/>
        </>
      )
    }}
  </Story>
</Canvas>
