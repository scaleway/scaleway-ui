import { Meta } from '@storybook/addon-docs'

<Meta title="Migration"/>

# Migration

  How to make a component deprecated and what is the process of migration? That's what we will see in this documentation.

## My component is changing name plus others properties, and we can't have a 1:1 easy migration path

1. Step one, the old component should be marked as deprecated in story.

  For stories, you can simply use the parameter `deprecated` and `deprecatedReason` into your story default export. It should look as follows:

  ```typescript
    export default {
      component: Button,
      parameters: {
        deprecated: true,
        deprecatedReason: 'This component is deprecated please do not use it any more.',
      },
      title: 'Components/Button/Button',
    } as Meta
  ```

  This will add a badge and a message into your storybook documentation. It should look as follows:
  <img src="https://scaleway-ui-storybook-images.s3.fr-par.scw.cloud/Screenshot%202022-05-17%20at%2016.23.10.png" alt="deprecated example screenshot" width="1000px" />

2. Second step is to mark component deprecated trough JSDoc comments with a beautiful description on what to replace usage by. This should be shown in typescript hints. It should look as follows:

  ```typescript
    /**
     * @deprecated Has been replaced by component BetterButton, please this one instead.
     */
    const Button = props => (
        <div>
            This is supposed to be a button
        </div>
    )
  ```


3. Create your new component with all its new parameters, once you're done create a pull request. You can merge it freely and start the migration progressively and simultaneously with others migrations of this type.

  **Don't forget to remove your deprecated component once the migration is ended**. Deprecated state should only be used for progressive migration and to avoid conflict between others migrations.
